{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\natha\\\\Desktop\\\\react-pokedex\\\\react-pokedex\\\\src\\\\components\\\\Login.tsx\",\n  _s = $RefreshSig$();\nimport { useAppDispatch } from \"../app/hooks\";\nimport { GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\nimport { firebaseAuth, firebaseDB, usersRef } from \"../utils/firebaseConfig\";\nimport { FcGoogle } from \"react-icons/fc\";\nimport { addDoc, collection, getDocs, query, where } from \"firebase/firestore\";\nimport { setUserStatus } from \"../app/slices/AppSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const dispatch = useAppDispatch();\n  const handleLogin = async () => {\n    const provider = new GoogleAuthProvider();\n    const {\n      user: {\n        email,\n        uid\n      }\n    } = await signInWithPopup(firebaseAuth, provider);\n    if (email) {\n      const firestoreQuery = query(usersRef, where(\"uid\", \"==\", uid));\n      const fetchedUser = await getDocs(firestoreQuery);\n      if (fetchedUser.docs.length === 0) {\n        await addDoc(collection(firebaseDB, \"users\"), {\n          uid,\n          email\n        });\n      }\n      dispatch(setUserStatus({\n        email\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogin,\n      className: \"login-btn\",\n      children: [/*#__PURE__*/_jsxDEV(FcGoogle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), \" Login with Google\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"BJQ1DUn/XFEl2NsQ3DWyHAXfnkY=\", false, function () {\n  return [useAppDispatch];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useAppDispatch","GoogleAuthProvider","signInWithPopup","firebaseAuth","firebaseDB","usersRef","FcGoogle","addDoc","collection","getDocs","query","where","setUserStatus","Login","dispatch","handleLogin","provider","user","email","uid","firestoreQuery","fetchedUser","docs","length"],"sources":["C:/Users/natha/Desktop/react-pokedex/react-pokedex/src/components/Login.tsx"],"sourcesContent":["import { useAppDispatch } from \"../app/hooks\";\r\nimport { GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\r\nimport { firebaseAuth, firebaseDB, usersRef } from \"../utils/firebaseConfig\";\r\nimport { FcGoogle } from \"react-icons/fc\";\r\nimport { addDoc, collection, getDocs, query, where } from \"firebase/firestore\";\r\nimport { setUserStatus } from \"../app/slices/AppSlice\";\r\nfunction Login() {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const handleLogin = async () => {\r\n    const provider = new GoogleAuthProvider();\r\n    const {\r\n      user: { email, uid },\r\n    } = await signInWithPopup(firebaseAuth, provider);\r\n\r\n    if (email) {\r\n      const firestoreQuery = query(usersRef, where(\"uid\", \"==\", uid));\r\n      const fetchedUser = await getDocs(firestoreQuery);\r\n      if (fetchedUser.docs.length === 0) {\r\n        await addDoc(collection(firebaseDB, \"users\"), {\r\n          uid,\r\n          email,\r\n        });\r\n      }\r\n      dispatch(setUserStatus({ email }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <button onClick={handleLogin} className=\"login-btn\">\r\n        <FcGoogle /> Login with Google\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":";;AAAA,SAASA,cAAc,QAAQ,cAAc;AAC7C,SAASC,kBAAkB,EAAEC,eAAe,QAAQ,eAAe;AACnE,SAASC,YAAY,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,yBAAyB;AAC5E,SAASC,QAAQ,QAAQ,gBAAgB;AACzC,SAASC,MAAM,EAAEC,UAAU,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,QAAQ,oBAAoB;AAC9E,SAASC,aAAa,QAAQ,wBAAwB;AAAC;AACvD,SAASC,KAAK,GAAG;EAAA;EACf,MAAMC,QAAQ,GAAGd,cAAc,EAAE;EAEjC,MAAMe,WAAW,GAAG,YAAY;IAC9B,MAAMC,QAAQ,GAAG,IAAIf,kBAAkB,EAAE;IACzC,MAAM;MACJgB,IAAI,EAAE;QAAEC,KAAK;QAAEC;MAAI;IACrB,CAAC,GAAG,MAAMjB,eAAe,CAACC,YAAY,EAAEa,QAAQ,CAAC;IAEjD,IAAIE,KAAK,EAAE;MACT,MAAME,cAAc,GAAGV,KAAK,CAACL,QAAQ,EAAEM,KAAK,CAAC,KAAK,EAAE,IAAI,EAAEQ,GAAG,CAAC,CAAC;MAC/D,MAAME,WAAW,GAAG,MAAMZ,OAAO,CAACW,cAAc,CAAC;MACjD,IAAIC,WAAW,CAACC,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;QACjC,MAAMhB,MAAM,CAACC,UAAU,CAACJ,UAAU,EAAE,OAAO,CAAC,EAAE;UAC5Ce,GAAG;UACHD;QACF,CAAC,CAAC;MACJ;MACAJ,QAAQ,CAACF,aAAa,CAAC;QAAEM;MAAM,CAAC,CAAC,CAAC;IACpC;EACF,CAAC;EAED,oBACE;IAAK,SAAS,EAAC,OAAO;IAAA,uBACpB;MAAQ,OAAO,EAAEH,WAAY;MAAC,SAAS,EAAC,WAAW;MAAA,wBACjD,QAAC,QAAQ;QAAA;QAAA;QAAA;MAAA,QAAG,sBACd;IAAA;MAAA;MAAA;MAAA;IAAA;EAAS;IAAA;IAAA;IAAA;EAAA,QACL;AAEV;AAAC,GA7BQF,KAAK;EAAA,QACKb,cAAc;AAAA;AAAA,KADxBa,KAAK;AA+Bd,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}